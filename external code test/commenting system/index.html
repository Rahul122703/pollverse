<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comment Thread</title>
<style>
  .comment-thread {
    margin: 20px auto;
    max-width: 800px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); /* Improved shadow effect */
    padding: 20px;
    border-radius: 20px;
    background-color: #fff; /* White background */
    animation: fadeIn 0.8s ease; /* Slower fade-in animation */
  }
  .comment-thread {
    margin: 20px auto;
    max-width: 800px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); /* Improved shadow effect */
    padding: 20px;
    border-radius: 20px;
    background-color: #fff; /* White background */
    animation: fadeIn 0.8s ease; /* Slower fade-in animation */
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .comment-container {
    border: 2px solid #ddd; /* Light gray border */
    border-radius: 10px; /* Reduced border radius */
    padding: 10px; /* Reduced padding */
    margin: 10px; /* Reduced margin */
    background-color: #f9f9f9; /* Light gray background */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow effect */
    transition: all 0.4s ease; /* Smoother transition */
  }
  
  .comment-container:hover {
    transform: translateY(-3px); /* Lift effect on hover */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* Enhanced shadow on hover */
  }
  
  .user-info {
    display: flex;
    align-items: center;
    margin-bottom: 4px; /* Reduced margin */
  }
  
  .user-icon {
    width: 20px; /* Reduced width */
    height: 20px; /* Reduced height */
    border-radius: 50%;
    background-color: #ddd;
    margin-right: 4px; /* Reduced margin */
  }
  
  .username {
    font-weight: bold;
    margin-right: 4px; /* Reduced margin */
    font-size: 14px; /* Reduced font size */
    color: #333; /* Dark text color */
  }
  
  .comment-content {
    font-size: 14px; /* Reduced font size */
    margin-bottom: 4px; /* Reduced margin */
    color: #555; /* Slightly darker text color */
  }
  
  .reply-symbol {
    margin-left: 10px; /* Reduced margin */
    cursor: pointer;
    color: #007bff; /* Blue text color */
    font-size: 16px; /* Reduced font size */
    transition: color 0.3s ease; /* Smooth color transition */
  }
  
  .reply-symbol:hover {
    color: #0056b3; /* Darker blue on hover */
  }
  
  .reply-input {
    display: none;
    margin-left: 30px; /* Reduced margin */
    margin-top: 6px; /* Reduced top margin */
  }
  
  .reply-input textarea {
    width: calc(100% - 25px); /* Reduced width */
    padding: 6px; /* Reduced padding */
    border: none; /* No border */
    border-radius: 6px; /* Reduced border radius */
    margin-right: 3px; /* Reduced margin */
    background-color: #f5f5f5; /* Light gray background */
    color: #333; /* Dark text color */
    outline: none; /* Remove outline */
    transition: box-shadow 0.3s ease;
    resize: vertical; /* Allow vertical resizing */
    max-height: 100px; /* Limit maximum height */
  }
  
  .reply-input textarea:focus {
    box-shadow: 0 0 3px rgba(0, 123, 255, 0.5); /* Focus effect */
  }
  
  .reply-input button {
    padding: 6px 9px; /* Reduced padding */
    background-color: #007bff; /* Blue button */
    color: #fff; /* White text */
    border: none;
    border-radius: 6px; /* Reduced border radius */
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  .reply-input button:hover {
    background-color: #0056b3; /* Darker blue on hover */
  }
  
  .replies-container {
    margin-left: 30px; /* Reduced margin */
  }
  
  .replies-container .comment-container {
    border: 2px solid #e2e2e2; /* Light gray border */
    border-radius: 8px; /* Reduced border radius */
    padding: 8px; /* Reduced padding */
    margin-top: 8px; /* Reduced margin */
    background-color: #f5f5f5; /* Light gray background */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow effect */
    transition: all 0.4s ease; /* Smoother transition */
  }
  
  .replies-container .comment-container:hover {
    transform: translateY(-2px); /* Lift effect on hover */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Enhanced shadow on hover */
  }
  
  .toggle-replies-button {
    background-color: #007bff; /* Blue button */
    color: #fff; /* White text */
    padding: 3px 6px; /* Reduced padding */
    border: none;
    border-radius: 6px; /* Reduced border radius */
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  .toggle-replies-button:hover {
    background-color: #0056b3; /* Darker blue on hover */
  }
  .votes {
    margin-bottom: 4px; /* Reduced margin */
  }
  
  .upvote, .downvote {
    margin-right: 6px; /* Reduced margin */
    cursor: pointer;
    color: #4682b4; /* Steel blue */
    font-size: 16px; /* Reduced font size */
    transition: color 0.3s ease; /* Smooth color transition */
  }
  
  .upvote:hover, .downvote:hover {
    color: #4169e1; /* Royal blue on hover */
  }
  
  .vote-count {
    margin-right: 3px; /* Reduced margin */
    color: #4682b4; /* Steel blue */
    font-size: 14px; /* Reduced font size */
  }

  /* Add your other CSS styles here */

</style>
</head>
<body>

<div class="comment-thread content">
  <button id="toggle-comments" class="toggle-button">-</button> <!-- Button to hide comments -->
  
  <!-- Existing comments here -->

  <!-- New comment -->
  <div class="comment-container">
    <div class="user-info">
      <div class="user-icon"></div>
      <div class="username">New User</div>
    </div>
    <div class="comment-content">This is a new comment!</div>
    <div class="votes">
      <span class="upvote" onclick="vote(this)">▲</span>
      <span class="vote-count">0</span>
      <span class="downvote" onclick="vote(this)">▼</span>
    </div>
    <button class="toggle-replies-button" onclick="toggleReplies(this, 'new-comment')">+</button>
    <span class="reply-symbol" onclick="toggleReply(this)">↵</span>
    <div class="reply-input" style="display:none;">
      <textarea placeholder="Your reply" class="minimal-input"></textarea>
      <button onclick="saveReply(this)">Save</button>
    </div>
    <div class="replies-container">
      <!-- Nested replies will go here -->
    </div>
  </div>
</div>

<script>
  function toggleReply(button) {
    var replyInput = button.nextElementSibling;
    replyInput.style.display = (replyInput.style.display === 'none') ? 'block' : 'none';
  }

  function saveReply(button) {
    var replyInput = button.previousElementSibling;
    var replyText = replyInput.value.trim();
    if (replyText !== '') {
      var parentComment = button.closest('.comment-container');
      var repliesContainer = parentComment.querySelector('.replies-container');

      var replyContainerId = 'reply-' + Date.now(); // Generate unique ID for reply container
      var replyContainer = `
        <div class="comment-container" id="${replyContainerId}">
          <div class="user-info">
            <div class="user-icon"></div>
            <div class="username">Sunita Patel</div>
          </div>
          <div class="comment-content">${replyText}</div>
          <button class="toggle-replies-button" onclick="toggleReplies(this, '${replyContainerId}')">+</button>
          <span class="reply-symbol" onclick="toggleReply(this)">↵</span>
          <div class="reply-input" style="display:none;">
            <textarea placeholder="Your reply" class="minimal-input"></textarea>
            <button onclick="saveReply(this)">Save</button>
          </div>
          <div class="replies-container">
            <!-- Nested replies will go here -->
          </div>
        </div>
      `;

      repliesContainer.innerHTML += replyContainer;
      replyInput.value = ''; // Clear input field after saving reply
    }
  }

  function toggleReplies(button, commentId) {
    var repliesContainer = document.getElementById(commentId).querySelector('.replies-container');
    var replies = repliesContainer.querySelectorAll('.comment-container');

    for (var i = 0; i < replies.length; i++) {
      replies[i].style.display = (replies[i].style.display === 'none') ? 'block' : 'none';
    }

    // Change button text based on replies visibility
    button.textContent = (replies[0].style.display === 'none') ? '+' : '-';
  }

  // Function to toggle comments visibility
  document.getElementById('toggle-comments').addEventListener('click', function() {
    var comments = document.querySelectorAll('.comment-container');
    for (var i = 0; i < comments.length; i++) {
      comments[i].style.display = (comments[i].style.display === 'none') ? 'block' : 'none';
    }
  });

  function vote(voteButton) {
    var voteCountSpan = voteButton.parentElement.querySelector('.vote-count');
    var voteCount = parseInt(voteCountSpan.textContent);

    if (voteButton.classList.contains('upvote')) {
      voteCount++;
    } else if (voteButton.classList.contains('downvote')) {
      voteCount--;
    }

    voteCountSpan.textContent = voteCount;
  }
</script>

</body>
</html>
